// Code to start executing script when DOM ready
window.addEventListener('DOMContentLoaded', start);
let image = 'data:image/png;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAF+ArUDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9NaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKOlFABRQePX8Khe7hjzvmRPZjQBNRVCXXbKMc3Ck+iDNVJPFVsn3EaT8KANqj8R9K5uTxXKSdkCKPViapTeI72X7swQf7AxQB2WPw+vFRzXEUAJeVEH+0wFcJLf3M3355G+rVCTnryfU80AdnL4gsIuPPVj6KCaqS+K4F/1cTuffiuYTqef1oY44HA9BQB39vOLiGOQDG8ZxnpUlZ2hSiXTYj3U1o0AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABQTiiq+oO8dnK8ZwyjINAFhvl6imPPHGMs6qPc1xU+p3Mn3pn+gNVSzSdWP1LUAdrNrFnCPmnX8Oapy+J7RP8AVh3PrjFcoSMYGKVIpJPuozf7ozQBvyeLXP8Aq7dV92aqsviS8mGA6R/7q1Vh0a9mxi3ce7cVci8LXbY3lI/qc0AUZL+6mP7yaRh/vcVXkJbqSfqa6OLwqMfPPj2RatxeGrKPkhnPq1AHHgEDjj6U6ON5CNqs30FdxHpltCcrBH9SuashNudu0e20UAcXHo15P923bHqTgVch8LXT/wCseOMfXca6gDB6D6iloAwovCcQPz3LH2RcVai8OWMI5Qy/71adFAFUafbpGVjhRR/u1xN0nlXMqEYKsRzXoKruyOn1ritch2alKRwDzzQBs+FJc2sif3WzW3XNeFJSJ5YyeoyK6WgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKZM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zwP50AX/APhK5v8AniP++6X/AISyX/ngP++6zv7Dvf8Angfzo/sO+/54H86ANH/hLJf+eA/77o/4SyX/AJ4f+RKzv7Evv+eB/MUn9i33/Pu35igDT/4S2X/n3/8AIlH/AAlsn/Pv/wCRKzP7Fvv+fdvzFH9jX3/Pu35igDU/4S2T/n3/APIlH/CWv/z7/wDj9ZX9j3v/AD7t+lH9j3v/AD7tQBq/8Ja//PA/9/KX/hLW/wCeB/77rJ/si9/592pP7IvP+fdqANSfxP8AaIJIzDt3DGc81gfSrf8AZN5/z7tR/ZN5/wA+70AdP4d402P6Vp1naHG8FgiSKVcdQa0aACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooATbxRtFLRQAm33NG0UtFACbfc/nRtpaKAE2+5/Ojb9aWigBNvufzo2+5/OlooATb7n86NvuaWigBNvufzo2+9LRQAm33NG33paKADqSTyaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoq3/Zsv8AeT8z/hQdNlH8Sfmf8KAKlFWv7Ok/vJ+Zo/s6T+8v5mgCrRVn7BJ6r+dH2CT1X86AK1FWPsUnqv50fYpPVfzoAr0VYNm47rSfY39VoAgoqc2jjutJ9lf1WgCGipjbMO4pPs7eooAioqU27DuKTyG9RQBHRUnkN6ik8o+ooAZRT/KPqKTyz7UANop2w+1BUigBtFLtoIxQAlFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB/9k='

function start() {

    // Check user permissions, if so load the rest of functions, if not, redirects to index
    if (isAdmin()) {

        document.getElementById('form').addEventListener('submit', submitForm);

        let photo = document.getElementById('image');
        
        // If new photo is loaded, it changes value for image into new base64 coded image
        photo.addEventListener('change', () => {

            encodeImageFileAsURL(photo)

        });

    } else {
        window.location.href = "./index.html";
    }

    // Handles form submission
    function submitForm(e) {
        e.preventDefault();

        let product = getFormInfo();
        addProduct(product);
        window.location.href = "./admin-product.html";
    }

    // Gets info inputed by the user in the form
    function getFormInfo() {

        let name = document.getElementById('name').value;
        let description = document.getElementById('description').value;
        let price = document.getElementById('price').value;
        let capacity = document.getElementById('capacity').value;

        let product = {
            'name': name,
            'description': description,
            'price': price,
            'capacity': capacity,
            'image': image
        }


        return product;

    }




}

// Transform image loaded in input type file into base64 image
function encodeImageFileAsURL(element) {

    let file = element.files[0];
    let reader = new FileReader();

    reader.onloadend = function () {
        image = reader.result
    }

    reader.readAsDataURL(file);
}